[DEFAULT]
EXPSCRIPT_LARIAT=ci_regression_test_lariatsoft_v2.sh
INPUTFILEDIR_LARIAT=/pnfs/lariat/persistent/users/vito/ci_tests_inputfiles


# quick tests lariatsoft RUN1
[test ci_slicer_RUN1_regression_test_lariatsoft]
script=${LARIATSOFT_DIR}/test/%(EXPSCRIPT_LARIAT)s
NEVENTS=1
STAGE=1
STAGE_NAME=slicer
TESTMASK=testmask.txt
FHiCL_FILE=ci_test_%(STAGE_NAME)s_lariatsoft.fcl
INPUT_FILE=lariat_r006099_sr0504_Reference_raw_default.root
OUTPUT_STREAM=lariat_r006099_sr0504_Current_%(STAGE_NAME)s_default_%%#.root
REFERENCE_FILE=lariat_r006099_sr0504_Reference_%(STAGE_NAME)s_default.root
args=--executable lar --nevents %(NEVENTS)s --stage %(STAGE)s --stage-name %(STAGE_NAME)s --fhicl %(FHiCL_FILE)s --input %(INPUT_FILE)s --outputs %(OUTPUT_STREAM)s --testmask %(TESTMASK)s
inputfiles=%(INPUTFILEDIR_LARIAT)s/%(INPUT_FILE)s %(INPUTFILEDIR_LARIAT)s/%(TESTMASK)s %(INPUTFILEDIR_LARIAT)s/%(REFERENCE_FILE)s
parse_art_output=True
mem_usage_range=100:20000000
cpu_usage_range=10:60000

[test ci_blreco_RUN1_regression_test_lariatsoft]
script=${LARIATSOFT_DIR}/test/%(EXPSCRIPT_LARIAT)s
NEVENTS=1
STAGE=2
STAGE_NAME=blreco
TESTMASK=testmask.txt
FHiCL_FILE=ci_test_%(STAGE_NAME)s_lariatsoft.fcl
INPUT_FILE=lariat_r006099_sr0504_Reference_slicer_default.root
OUTPUT_STREAM=lariat_r006099_sr0504_Current_%(STAGE_NAME)s_default.root
REFERENCE_FILE=lariat_r006099_sr0504_Reference_%(STAGE_NAME)s_default.root
args=--executable lar --nevents %(NEVENTS)s --stage %(STAGE)s --stage-name %(STAGE_NAME)s --fhicl %(FHiCL_FILE)s --input %(INPUT_FILE)s --outputs %(OUTPUT_STREAM)s --testmask %(TESTMASK)s
inputfiles=%(INPUTFILEDIR_LARIAT)s/%(INPUT_FILE)s %(INPUTFILEDIR_LARIAT)s/%(TESTMASK)s %(INPUTFILEDIR_LARIAT)s/%(REFERENCE_FILE)s
parse_art_output=True
mem_usage_range=100:20000000
cpu_usage_range=10:60000

[test ci_reco2D_RUN1_regression_test_lariatsoft]
script=${LARIATSOFT_DIR}/test/%(EXPSCRIPT_LARIAT)s
NEVENTS=1
STAGE=2
STAGE_NAME=reco2D
TESTMASK=testmask.txt
FHiCL_FILE=ci_test_%(STAGE_NAME)s_lariatsoft.fcl
INPUT_FILE=lariat_r006099_sr0504_Reference_blreco_default.root
OUTPUT_STREAM=lariat_r006099_sr0504_Current_%(STAGE_NAME)s_default.root
REFERENCE_FILE=lariat_r006099_sr0504_Reference_%(STAGE_NAME)s_default.root
args=--executable lar --nevents %(NEVENTS)s --stage %(STAGE)s --stage-name %(STAGE_NAME)s --fhicl %(FHiCL_FILE)s --input %(INPUT_FILE)s --outputs %(OUTPUT_STREAM)s --testmask %(TESTMASK)s
inputfiles=%(INPUTFILEDIR_LARIAT)s/%(INPUT_FILE)s %(INPUTFILEDIR_LARIAT)s/%(TESTMASK)s %(INPUTFILEDIR_LARIAT)s/%(REFERENCE_FILE)s
parse_art_output=True
mem_usage_range=100:20000000
cpu_usage_range=10:60000


[suite quick_test_RUN1_lariatsoft]
testlist=ci_slicer_RUN1_regression_test_lariatsoft ci_blreco_RUN1_regression_test_lariatsoft ci_reco2D_RUN1_regression_test_lariatsoft


# quick tests lariatsoft RUN2
[test ci_slicer_RUN2_regression_test_lariatsoft]
script=${LARIATSOFT_DIR}/test/%(EXPSCRIPT_LARIAT)s
NEVENTS=1
STAGE=1
STAGE_NAME=slicer
TESTMASK=testmask.txt
FHiCL_FILE=ci_test_%(STAGE_NAME)s_lariatsoft.fcl
INPUT_FILE=lariat_r009535_sr0400_Reference_raw_default.root
OUTPUT_STREAM=lariat_r009535_sr0400_Current_%(STAGE_NAME)s_default_%%#.root
REFERENCE_FILE=lariat_r009535_sr0400_Reference_%(STAGE_NAME)s_default.root
args=--executable lar --nevents %(NEVENTS)s --stage %(STAGE)s --stage-name %(STAGE_NAME)s --fhicl %(FHiCL_FILE)s --input %(INPUT_FILE)s --outputs %(OUTPUT_STREAM)s --testmask %(TESTMASK)s
inputfiles=%(INPUTFILEDIR_LARIAT)s/%(INPUT_FILE)s %(INPUTFILEDIR_LARIAT)s/%(TESTMASK)s %(INPUTFILEDIR_LARIAT)s/%(REFERENCE_FILE)s
parse_art_output=True
mem_usage_range=100:20000000
cpu_usage_range=10:60000

[test ci_blreco_RUN2_regression_test_lariatsoft]
script=${LARIATSOFT_DIR}/test/%(EXPSCRIPT_LARIAT)s
NEVENTS=1
STAGE=2
STAGE_NAME=blreco
TESTMASK=testmask.txt
FHiCL_FILE=ci_test_%(STAGE_NAME)s_lariatsoft.fcl
INPUT_FILE=lariat_r009535_sr0400_Reference_slicer_default.root
OUTPUT_STREAM=lariat_r009535_sr0400_Current_%(STAGE_NAME)s_default.root
REFERENCE_FILE=lariat_r009535_sr0400_Reference_%(STAGE_NAME)s_default.root
args=--executable lar --nevents %(NEVENTS)s --stage %(STAGE)s --stage-name %(STAGE_NAME)s --fhicl %(FHiCL_FILE)s --input %(INPUT_FILE)s --outputs %(OUTPUT_STREAM)s --testmask %(TESTMASK)s
inputfiles=%(INPUTFILEDIR_LARIAT)s/%(INPUT_FILE)s %(INPUTFILEDIR_LARIAT)s/%(TESTMASK)s %(INPUTFILEDIR_LARIAT)s/%(REFERENCE_FILE)s
parse_art_output=True
mem_usage_range=100:20000000
cpu_usage_range=10:60000

[test ci_reco2D_RUN2_regression_test_lariatsoft]
script=${LARIATSOFT_DIR}/test/%(EXPSCRIPT_LARIAT)s
NEVENTS=1
STAGE=2
STAGE_NAME=reco2D
TESTMASK=testmask.txt
FHiCL_FILE=ci_test_%(STAGE_NAME)s_lariatsoft.fcl
INPUT_FILE=lariat_r009535_sr0400_Reference_blreco_default.root
OUTPUT_STREAM=lariat_r009535_sr0400_Current_%(STAGE_NAME)s_default.root
REFERENCE_FILE=lariat_r009535_sr0400_Reference_%(STAGE_NAME)s_default.root
args=--executable lar --nevents %(NEVENTS)s --stage %(STAGE)s --stage-name %(STAGE_NAME)s --fhicl %(FHiCL_FILE)s --input %(INPUT_FILE)s --outputs %(OUTPUT_STREAM)s --testmask %(TESTMASK)s
inputfiles=%(INPUTFILEDIR_LARIAT)s/%(INPUT_FILE)s %(INPUTFILEDIR_LARIAT)s/%(TESTMASK)s %(INPUTFILEDIR_LARIAT)s/%(REFERENCE_FILE)s
parse_art_output=True
mem_usage_range=100:20000000
cpu_usage_range=10:60000


[suite quick_test_RUN2_lariatsoft]
testlist=ci_slicer_RUN2_regression_test_lariatsoft ci_blreco_RUN2_regression_test_lariatsoft ci_reco2D_RUN2_regression_test_lariatsoft


[suite quick_test_lariatsoft]
testlist=quick_test_RUN1_lariatsoft quick_test_RUN2_lariatsoft



#########################
# Sequential tests lariatsoft RUN1
[test ci_slicer_RUN1_regression_seq_test_lariatsoft]
script=${LARIATSOFT_DIR}/test/%(EXPSCRIPT_LARIAT)s
NEVENTS=10
STAGE=1
STAGE_NAME=slicer
TESTMASK=testmask.txt
FHiCL_FILE=ci_test_%(STAGE_NAME)s_lariatsoft.fcl
INPUT_FILE=lariat_r006099_sr0504_Reference_blreco_default.root
OUTPUT_STREAM=lariat_r006099_sr0504_Current_%(STAGE_NAME)s_default_%%#.root
REFERENCE_FILE=lariat_r006099_sr0504_Reference_%(STAGE_NAME)s_default.root
args=--executable lar --nevents %(NEVENTS)s --stage %(STAGE)s --stage-name %(STAGE_NAME)s --fhicl %(FHiCL_FILE)s --input %(INPUT_FILE)s --outputs %(OUTPUT_STREAM)s --testmask %(TESTMASK)s
inputfiles=%(INPUTFILEDIR_LARIAT)s/%(INPUT_FILE)s %(INPUTFILEDIR_LARIAT)s/%(TESTMASK)s %(INPUTFILEDIR_LARIAT)s/%(REFERENCE_FILE)s
parse_art_output=True
mem_usage_range=100:20000000
cpu_usage_range=10:60000

[test ci_blreco_RUN1_regression_seq_test_lariatsoft]
script=${LARIATSOFT_DIR}/test/%(EXPSCRIPT_LARIAT)s
requires=ci_slicer_RUN1_regression_seq_test_lariatsoft
NEVENTS=10
STAGE=2
STAGE_NAME=blreco
TESTMASK=testmask.txt
FHiCL_FILE=ci_test_%(STAGE_NAME)s_lariatsoft.fcl
INPUT_FILE=../%(requires)s/lariat_r006099_sr0504_Current_slicer_default.root
OUTPUT_STREAM=lariat_r006099_sr0504_Current_%(STAGE_NAME)s_default.root
REFERENCE_FILE=lariat_r006099_sr0504_Reference_%(STAGE_NAME)s_default.root
args=--executable lar --nevents %(NEVENTS)s --stage %(STAGE)s --stage-name %(STAGE_NAME)s --fhicl %(FHiCL_FILE)s --input %(INPUT_FILE)s --outputs %(OUTPUT_STREAM)s --testmask %(TESTMASK)s
inputfiles=%(INPUTFILEDIR_LARIAT)s/%(INPUT_FILE)s %(INPUTFILEDIR_LARIAT)s/%(TESTMASK)s %(INPUTFILEDIR_LARIAT)s/%(REFERENCE_FILE)s
parse_art_output=True
mem_usage_range=100:20000000
cpu_usage_range=10:60000

[test ci_reco2D_RUN1_regression_seq_test_lariatsoft]
script=${LARIATSOFT_DIR}/test/%(EXPSCRIPT_LARIAT)s
requires=ci_blreco_RUN1_regression_seq_test_lariatsoft
NEVENTS=10
STAGE=3
STAGE_NAME=reco2D
TESTMASK=testmask.txt
FHiCL_FILE=ci_test_%(STAGE_NAME)s_lariatsoft.fcl
INPUT_FILE=../%(requires)s/lariat_r006099_sr0504_Current_blreco_default.root
OUTPUT_STREAM=lariat_r006099_sr0504_Current_%(STAGE_NAME)s_default.root
REFERENCE_FILE=lariat_r006099_sr0504_Reference_%(STAGE_NAME)s_default.root
args=--executable lar --nevents %(NEVENTS)s --stage %(STAGE)s --stage-name %(STAGE_NAME)s --fhicl %(FHiCL_FILE)s --input %(INPUT_FILE)s --outputs %(OUTPUT_STREAM)s --testmask %(TESTMASK)s
inputfiles=%(INPUTFILEDIR_LARIAT)s/%(INPUT_FILE)s %(INPUTFILEDIR_LARIAT)s/%(TESTMASK)s %(INPUTFILEDIR_LARIAT)s/%(REFERENCE_FILE)s


[suite seq_test_RUN1_lariatsoft]
testlist=ci_slicer_RUN1_regression_seq_test_lariatsoft ci_blreco_RUN1_regression_seq_test_lariatsoft ci_reco2D_RUN1_regression_seq_test_lariatsoft


# Sequential tests lariatsoft RUN2
[test ci_slicer_RUN2_regression_seq_test_lariatsoft]
script=${LARIATSOFT_DIR}/test/%(EXPSCRIPT_LARIAT)s
NEVENTS=10
STAGE=1
STAGE_NAME=slicer
TESTMASK=testmask.txt
FHiCL_FILE=ci_test_%(STAGE_NAME)s_lariatsoft.fcl
INPUT_FILE=lariat_r009535_sr0400_Reference_blreco_default.root
OUTPUT_STREAM=lariat_r009535_sr0400_Current_%(STAGE_NAME)s_default_%%#.root
REFERENCE_FILE=lariat_r009535_sr0400_Reference_%(STAGE_NAME)s_default.root
args=--executable lar --nevents %(NEVENTS)s --stage %(STAGE)s --stage-name %(STAGE_NAME)s --fhicl %(FHiCL_FILE)s --input %(INPUT_FILE)s --outputs %(OUTPUT_STREAM)s --testmask %(TESTMASK)s
inputfiles=%(INPUTFILEDIR_LARIAT)s/%(INPUT_FILE)s %(INPUTFILEDIR_LARIAT)s/%(TESTMASK)s %(INPUTFILEDIR_LARIAT)s/%(REFERENCE_FILE)s
parse_art_output=True
mem_usage_range=100:20000000
cpu_usage_range=10:60000

[test ci_blreco_RUN2_regression_seq_test_lariatsoft]
script=${LARIATSOFT_DIR}/test/%(EXPSCRIPT_LARIAT)s
requires=ci_slicer_RUN2_regression_seq_test_lariatsoft
NEVENTS=10
STAGE=2
STAGE_NAME=blreco
TESTMASK=testmask.txt
FHiCL_FILE=ci_test_%(STAGE_NAME)s_lariatsoft.fcl
INPUT_FILE=../%(requires)s/lariat_r009535_sr0400_Current_slicer_default.root
OUTPUT_STREAM=lariat_r009535_sr0400_Current_%(STAGE_NAME)s_default.root
REFERENCE_FILE=lariat_r009535_sr0400_Reference_%(STAGE_NAME)s_default.root
args=--executable lar --nevents %(NEVENTS)s --stage %(STAGE)s --stage-name %(STAGE_NAME)s --fhicl %(FHiCL_FILE)s --input %(INPUT_FILE)s --outputs %(OUTPUT_STREAM)s --testmask %(TESTMASK)s
inputfiles=%(INPUTFILEDIR_LARIAT)s/%(INPUT_FILE)s %(INPUTFILEDIR_LARIAT)s/%(TESTMASK)s %(INPUTFILEDIR_LARIAT)s/%(REFERENCE_FILE)s
parse_art_output=True
mem_usage_range=100:20000000
cpu_usage_range=10:60000

[test ci_reco2D_RUN2_regression_seq_test_lariatsoft]
script=${LARIATSOFT_DIR}/test/%(EXPSCRIPT_LARIAT)s
requires=ci_blreco_RUN2_regression_seq_test_lariatsoft
NEVENTS=10
STAGE=3
STAGE_NAME=reco2D
TESTMASK=testmask.txt
FHiCL_FILE=ci_test_%(STAGE_NAME)s_lariatsoft.fcl
INPUT_FILE=../%(requires)s/lariat_r009535_sr0400_Current_blreco_default.root
OUTPUT_STREAM=lariat_r009535_sr0400_Current_%(STAGE_NAME)s_default.root
REFERENCE_FILE=lariat_r006099_sr0504_Reference_%(STAGE_NAME)s_default.root
args=--executable lar --nevents %(NEVENTS)s --stage %(STAGE)s --stage-name %(STAGE_NAME)s --fhicl %(FHiCL_FILE)s --input %(INPUT_FILE)s --outputs %(OUTPUT_STREAM)s --testmask %(TESTMASK)s
inputfiles=%(INPUTFILEDIR_LARIAT)s/%(INPUT_FILE)s %(INPUTFILEDIR_LARIAT)s/%(TESTMASK)s %(INPUTFILEDIR_LARIAT)s/%(REFERENCE_FILE)s


[suite seq_test_RUN2_lariatsoft]
testlist=ci_slicer_RUN2_regression_seq_test_lariatsoft ci_blreco_RUN2_regression_seq_test_lariatsoft ci_reco2D_RUN2_regression_seq_test_lariatsoft



[suite seq_test_lariatsoft]
testlist=seq_test_RUN1_lariatsoft seq_test_RUN2_lariatsoft
